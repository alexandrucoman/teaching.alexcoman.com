<!DOCTYPE html> <!--[if IE 8]> <html lang="ro" class="ie8"> <![endif]--> <!--[if IE 9]> <html lang="ro" class="ie9"> <![endif]--> <!--[if !IE]><!--> <html lang="ro"> <!--<![endif]--> <head> <title>Noțiuni introductive în Bash</title> <!-- Meta --> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <meta name="description" lang="ro" xml:lang="ro" content="Situl dedicat laboratoarelor susținute în cadrul Facultății de Informatică din Iași." /> <meta name="keywords" lang="en" xml:lang="en" content="Web, WWW, technology, course, Romania, Iasi, Computer Science, university, academic, information, education, school, project, lang programming, document, software, application, student, grade" /> <meta name="keywords" lang="ro" xml:lang="ro" content="Web, WWW, technologie, curs, Romania, Iasi, Informatica, universitate, academic, informatie, educatie, scoala, proiect, limbaj, programare, document, software, aplicatie, student, nota" /> <link rel="shortcut icon" href="/assets/images/favicon.ico"> <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'> <!-- Global CSS --> <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"> <!-- Plugins CSS --> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/5.3.0/ekko-lightbox.css"> <!-- Theme CSS --> <link id="theme-style" rel="stylesheet" href="/assets/css/main.css"> <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries --> <!--[if lt IE 9]> <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script> <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script> <![endif]--> <link rel="canonical" href="https://teaching.alexcoman.com/resurse/tutorial/sisteme-operare/notiuni-introductive-in-bash/"> <link rel="alternate" type="application/rss+xml" title="" href="/feed.xml"> <script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" integrity="sha256-3YM6A3pH4QFCl9WbSU8oXF5N6W/2ylvW0o2g+Z6TmLQ=" crossorigin="anonymous" /> </head> <body > <div class="page-wrapper"> <header id="header" class="header "> <div class="container"> <div class="branding"> <h1 class="logo"> <a href="/resurse/tutorial/sisteme-operare/notiuni-introductive-in-bash/"> <span aria-hidden="true" class="icon fas fa-laptop"></span> <span class="text-highlight">Laboratoare</span> <span class="text">@FII</span> </a> </h1> </div> <ol class="breadcrumb"> <li><a href="/">Acasă</a></li> <li><a href="/resurse">Resurse</a></li> <li><a href="/resurse/tutorial">Tutorial</a></li> <li><a href="/resurse/tutorial/sisteme-operare">Sisteme-operare</a></li> <li class="active">Noțiuni introductive în Bash</li> </ol> </div> </header> <section id="blog_post" class="blog-post-section doc-wrapper"> <div class="container"> <div id="doc-header" class="doc-header text-center"> <h1 class="doc-title" itemprop="name headline"> <i class="icon fas fa-paper-plane"></i> Noțiuni introductive în Bash </h1> <div class="meta"> Publicat de: <i class="fas fa-user"></i> <span itemprop="author" itemscope itemtype="http://schema.org/Person"> <span itemprop="name">Gabriel Paiu</span> </span> <i class="fas fa-user"></i> <span itemprop="author" itemscope itemtype="http://schema.org/Person"> <span itemprop="name">Alexandru Coman</span> </span> pe <i class="fas fa-clock"></i> <time datetime="2018-02-17T12:00:00+00:00" itemprop="datePublished"> 17 februarie 2018 </time> </div> </div> <div class="doc-body"> <div class="doc-content"> <div class="content-inner"> <section id="dashboards" class="doc-section"> <div class="section-block"> <p>Acest totorial este o scurtă recapitulare a noțiunilor referitoare la Bash ce au fost predate în cadrul cursului de Sisteme de Operare. <!--more--></p> <h2 id="despre">Despre</h2> <p>Bash (Bourne Again Shell) este un superset al Shell Command Language (SH) care permite o sintaxa mai usoara si mai lizibila si care aduce imbunatatiri. La baza, o comanda bash sau un script bash primeste date de intrare de la un terminal, de la un descriptor de fisier sau dintr-un sir de caractere, apoi ruleaza si produce date de iesire.</p> <p>In bash nu exista decat variabile ca si structuri de date, care nu pot fi altceva decat siruri de caractere. Orice comanda sau operator care simuleaza alte structuri de date sau tipuri de variabile (de exemplu compararea intregilor sau declararea vectorilor) sunt doar implementari peste siruri de caractere care se pot comporta in anumite situatii ca si vectori sau intregi.</p> <h2 id="ordinea-evenimentelor-în-execuția-comenzilor-in-shell">Ordinea evenimentelor în execuția comenzilor in shell</h2> <ul> <li>Shell-ul citește input (din fișier, terminal, șir de caractere) și le separă in cuvinte si operatori cu metacaractere</li> <li>Expansiunea aliasurilor</li> <li>Shell-ul analizeaza si reconstruiește informațiile în comenzi compuse</li> <li>Expansiunea elementelor de Shell</li> <li>Redirectarea descriptorilor. Operatorii și operanzii acestora sunt eliminați din argumente</li> <li>Comenzile sunt executate</li> <li>Cod de ieșire (definit sau ultimul rezultat returnat de ultima comanda executată)</li> </ul> <h2 id="expansiunea-elementelor-de-shell">Expansiunea elementelor de Shell</h2> <ol> <li>Expansiunea acoladelor În acest pas, elementele componente definite între acolade sunt concatenate în mod repetat la șirul ce le conține <ul> <li>Concatenează fiecare element definit într-o listă la șirul precedent</li> <li>Exemplu: echo a{1,2,3} -&gt; a1 a2 a3</li> </ul> </li> <li>Expansiunea tilda: ~PREFIX/string Intre ~ (tidla) și primul slash (/) se poate insera opțional un prefix. Există mai multe variante de substituție in acest caz. Exemple: <ul> <li>~/ sau ~ va fi substituit cu $HOME/director $ echo ~ /Users/gpaiu</li> <li>~+/ sau ~+ va fi substituit de $PWD $ echo ~+ /Users/gpaiu/Music</li> <li>~-/ sau ~- va fi substituit de $OLDPWD</li> <li>~USER/ va fi substituit de $HOME aferent utilizatorului USER</li> </ul> </li> <li>Parametrii de shell si substituirea variabilelor</li> <li>Substituirea argumentelor primite in formă de comenzi – pentru comenzile executate folosind sintaxa $(ls -1A) sau `ls -1A`</li> <li>Expansiunea operațiilor aritmentice – exemplu: $((VAR++)) sau [ $EXPRESSION ]</li> <li>Substituirea proceselor (redirecționarea canalelor) – exempluȘ 1&gt;/dev/null 2&gt;&amp;1</li> <li>Separarea cuvintelor <ul> <li>Shell-ul scanează rezultatele operațiunilor de expansiune a parametrilor de shell, variabilelor, substituția argumentelor in formă de comenzi și a operațiilor aritmetice (pașii 3, 4 si 5) care nu au fost incapsulate între ghilimele</li> <li>Șirurile sunt separate in cuvinte, iar caracterele din parametrul de shell $IFS (Internal Field Separator) vor servi ca delimitatoare</li> </ul> </li> <li>Expansiunea numelor de fișiere. Pentru tipare definite cu caracterele asterisk (*), semnul intrebării (?) sau paranteză unghiulară deschisă ([)</li> <li>Eliminarea ghilimelelor</li> </ol> <h2 id="sintaxa">Sintaxa</h2> <p>Orice script invocat intr-un shell trebuie sa contina la inceput un shebang. Shebang-ul incepe ca un comentariu, cu caracterul diez (#) dar este urmat de un semn de excalamare (!) si programul care va executa secventa de cod ce urmeaza. Fiecare secventa de cod poate fi apelata si in terminal. In cazul Bash, vom folosi ca shebang #!/bin/bash.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c"># o variabila este referentiata fara '$' atunci cand se face asignarea</span>
<span class="nv">variabila</span><span class="o">=</span><span class="s2">"1"</span>
<span class="c"># o variabila este referentiata cu '$' cand este nevoie de continutul ei</span>
<span class="nb">echo</span> <span class="nv">$variabila</span>
</code></pre></div></div> <h3 id="compararea-variabilelor">Compararea variabilelor</h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="nv">var1</span><span class="o">=</span><span class="s2">"1"</span>
<span class="nv">var2</span><span class="o">=</span><span class="s2">"2"</span>

<span class="k">if</span> <span class="o">[[</span> <span class="nv">$var1</span> <span class="nt">-gt</span> <span class="nv">$var2</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
  <span class="c"># -gt sau "greater than"</span>
  <span class="nb">echo</span> <span class="s2">"</span><span class="nv">$var1</span><span class="s2"> este mai mare decat </span><span class="nv">$var2</span><span class="s2">"</span>
<span class="k">elif</span> <span class="o">[[</span> <span class="nv">$var1</span> <span class="nt">-eq</span> <span class="nv">$var2</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
  <span class="c"># -eq sau "equal"</span>
  <span class="nb">echo</span> <span class="s2">"Variabilele sunt egale"</span>
<span class="k">else
  </span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$var1</span><span class="s2"> este mai mic decat </span><span class="nv">$var2</span><span class="s2">"</span>
<span class="k">fi</span>
</code></pre></div></div> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> ./laborator1.sh
1 este mai mic decat 2
</code></pre></div></div> <p>Similar pentru siruri de caractere</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$var1</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"</span><span class="nv">$var2</span><span class="s2">"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
  </span><span class="nb">echo</span> <span class="s2">"Sirurile sunt identice"</span>
<span class="k">fi</span>
</code></pre></div></div> <table> <tbody> <tr> <td>Aplicarea conditiilor multiple ( folosind operatorii logici &amp;&amp; (si) sau</td> <td> </td> <td>(sau) )</td> </tr> </tbody> </table> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="o">[[</span> <span class="nv">$var1</span> <span class="nt">-gt</span> 0 <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="o">[[</span> <span class="nv">$var1</span> <span class="nt">-lt</span> <span class="nv">$var2</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
  </span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$var1</span><span class="s2"> &gt; 0 si </span><span class="nv">$var1</span><span class="s2"> &lt; </span><span class="nv">$var2</span><span class="s2">"</span>
<span class="k">fi</span>
</code></pre></div></div> <h3 id="iterarea">Iterarea</h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># sau for i in $(seq 1 5); do</span>
<span class="k">for </span>i <span class="k">in </span>1 2 3 4 5<span class="p">;</span> <span class="k">do
  </span><span class="nb">echo</span> <span class="nt">-n</span> <span class="nv">$i</span><span class="p">;</span>
<span class="k">done</span>
</code></pre></div></div> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> ./laborator1.sh
1 2 3 4 5
</code></pre></div></div> <h3 id="parsarea-argumentelor">Parsarea argumentelor</h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c"># Afiseaza toate argumentele primite din linia de comanda</span>
<span class="nb">echo</span> <span class="nv">$@</span>
</code></pre></div></div> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> bash laborator1.sh 1 2 3
1 2 3
</code></pre></div></div> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c"># Afiseaza primul si al treilea argument</span>
<span class="nb">echo</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2"> </span><span class="nv">$3</span><span class="s2">"</span>
</code></pre></div></div> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bash laborator1.sh 1 2 3
1 3
</code></pre></div></div> <h3 id="input-si-output">Input si output</h3> <p>Trimiterea datelor de iesire catre un fisier:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="nb">echo</span> <span class="s2">"Primul laborator"</span> <span class="o">&gt;</span> fisier.txt
</code></pre></div></div> <p>Date de intrare citite din fisier:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="k">while </span><span class="nb">read </span>line<span class="p">;</span> <span class="k">do
  </span><span class="nb">echo</span> <span class="nv">$line</span>
<span class="k">done</span> &lt; fisier.txt
</code></pre></div></div> <h3 id="named-pipe">Named pipe</h3> <p>Permite pasarea datelor de iesire de la o comanda ca date de intrare pentru alta comanda):</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c"># grep afiseaza liniile care contin text, iar wc le numara</span>
<span class="nb">grep</span> <span class="s2">"text"</span> fisier.txt | <span class="nb">wc</span> <span class="nt">-l</span>
</code></pre></div></div> <h3 id="manipularea-descriptorilor-de-fisier">Manipularea descriptorilor de fisier</h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

<span class="nb">exec </span>4&gt;stdout.log
<span class="nb">exec </span>2&gt;error.log
<span class="nb">exec </span>1&gt;&amp;4

<span class="nb">echo</span> <span class="s2">"Fisier sau terminal?"</span>
<span class="nb">echo</span> <span class="s2">"Eroare"</span> <span class="o">&gt;</span>&amp;2
</code></pre></div></div> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> <span class="nb">cat </span>stdout.log
Fisier sau terminal
<span class="nv">$&gt;</span> <span class="nb">cat </span>error.log
Eroare
</code></pre></div></div> <h2 id="comenzi-utile">Comenzi utile</h2> <h3 id="ls-list">ls (list)</h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> <span class="nb">ls
</span>courses.tss-yonder.com  laborator1
</code></pre></div></div> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Listarea fisierelor din directorul curent, inclusiv cele ascunse</span>
<span class="nv">$&gt;</span> <span class="nb">ls</span> <span class="nt">-la</span>
total 0
drwxr-xr-x   5 gpaiu  staff  160 Feb 12 17:29 <span class="nb">.</span>
drwxr-xr-x  18 gpaiu  staff  576 Jan 31 10:28 ..
<span class="nt">-rw-r--r--</span>   1 gpaiu  staff    0 Feb 12 17:29 .fisier_ascuns
drwxr-xr-x  23 gpaiu  staff  736 Jan 24 15:48 courses.tss-yonder.com
drwxr-xr-x   5 gpaiu  staff  160 Feb 12 17:26 laborator1
</code></pre></div></div> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Afisarea directorului curent, in forma de lista detaliata, fara a lista fisierele</span>
<span class="nv">$&gt;</span> <span class="nb">ls</span> <span class="nt">-ld</span> <span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>
drwxr-xr-x  4 gpaiu  staff  128 Feb 12 17:26 /Users/gpaiu/Documents/Work/MLMOS
</code></pre></div></div> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Afisarea fisierelor, cu omiterea . si .., cate unul pe linie</span>
<span class="nv">$&gt;</span> <span class="nb">ls</span> <span class="nt">-1A</span>
.fisier_ascuns
courses.tss-yonder.com
laborator1
</code></pre></div></div> <h3 id="cd-change-directory">cd (change directory)</h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> <span class="nb">pwd</span>
/Users/gpaiu/Documents/Work/MLMOS
<span class="nv">$&gt;</span> <span class="nb">cd</span> .. <span class="o">&amp;&amp;</span> <span class="nb">pwd</span>
/Users/gpaiu/Documents/Work
<span class="nv">$&gt;</span> <span class="nb">cd</span> /Users/gpaiu/Documents <span class="o">&amp;&amp;</span> <span class="nb">pwd</span>
/Users/gpaiu/Documents
<span class="nv">$&gt;</span> <span class="nb">cd</span> <span class="o">&amp;&amp;</span> <span class="nb">pwd</span>
/Users/gpaiu
<span class="nv">$&gt;</span> <span class="nb">cd</span> <span class="nb">.</span> <span class="o">&amp;&amp;</span> <span class="nb">pwd</span>
/Users/gpaiu
</code></pre></div></div> <h3 id="cp-copy">cp (copy)</h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> <span class="nb">cp </span>stdout.log stdout.log.backup
<span class="nv">$&gt;</span> <span class="nb">ls </span>stdout<span class="k">*</span>
stdout.log      stdout.log.backup
</code></pre></div></div> <h3 id="mv-move-rm-remove">mv (move), rm (remove)</h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Sterge fisierul creat precedent</span>
<span class="nv">$&gt;</span> <span class="nb">rm</span> <span class="nt">-f</span> stdout.log.backup
<span class="nv">$&gt;</span> <span class="nb">mv </span>stdout.log stdout.log.backup
<span class="nv">$&gt;</span> <span class="nb">ls </span>stdout<span class="k">*</span>
stdout.log.backup
<span class="nv">$&gt;</span> <span class="nb">mkdir </span>logs
<span class="nv">$&gt;</span> <span class="nb">mv </span>stdout.log.backup logs
<span class="nv">$&gt;</span> <span class="nb">ls </span>logs
stdout.log
</code></pre></div></div> <h3 id="grep">grep</h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Cauta aparitia sirului de caractere intr-un fisier</span>
<span class="nv">$&gt;</span> <span class="nb">grep </span>root /etc/passwd
root:<span class="k">*</span>:0:0:System Administrator:/var/root:/bin/sh
daemon:<span class="k">*</span>:1:1:System Services:/var/root:/usr/bin/false
_cvmsroot:<span class="k">*</span>:212:212:CVMS Root:/var/empty:/usr/bin/false

<span class="c"># Poate fi folosit impreuna cu named pipe</span>
<span class="nv">$&gt;</span> <span class="nb">cat</span> /etc/passwd | <span class="nb">grep </span>root

<span class="c"># Case insensitive</span>
<span class="nv">$&gt;</span> <span class="nb">grep</span> <span class="nt">-i</span> administrator /etc/passwd
root:<span class="k">*</span>:0:0:System Administrator:/var/root:/bin/sh
_cyrus:<span class="k">*</span>:77:6:Cyrus Administrator:/var/imap:/usr/bin/false
_dovecot:<span class="k">*</span>:214:6:Dovecot Administrator:/var/empty:/usr/bin/false

<span class="c"># Suport pentru expresii regulate</span>
<span class="nv">$&gt;</span> <span class="nb">grep</span> <span class="nt">-i</span> <span class="s2">"^root:"</span> /etc/passwd
root:<span class="k">*</span>:0:0:System Administrator:/var/root:/bin/sh
</code></pre></div></div> <h3 id="cat">cat</h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Afiseaza continutul unui fisier</span>
<span class="nv">$&gt;</span> <span class="nb">cat </span>fisier.txt
Primul laborator
</code></pre></div></div> <h3 id="tail-head">tail, head</h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> <span class="k">for </span>i <span class="k">in</span> <span class="k">$(</span><span class="nb">seq </span>1 10<span class="k">)</span><span class="p">;</span> <span class="k">do </span><span class="nb">echo</span> <span class="s2">"Linia </span><span class="nv">$i</span><span class="s2">"</span> <span class="o">&gt;&gt;</span> lista.txt<span class="p">;</span> <span class="k">done</span>
<span class="nv">$&gt;</span> <span class="nb">cat </span>lista.txt
Linia 1
Linia 2
Linia 3
Linia 4
Linia 5
Linia 6
Linia 7
Linia 8
Linia 9
Linia 10
</code></pre></div></div> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> <span class="nb">head</span> <span class="nt">-5</span> lista.txt
Linia 1
Linia 2
Linia 3
Linia 4
Linia 5
</code></pre></div></div> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> <span class="nb">tail</span> <span class="nt">-3</span> lista.txt
Linia 8
Linia 9
Linia 10
<span class="nv">$&gt;</span> <span class="nb">head</span> <span class="nt">-7</span> lista.txt | <span class="nb">tail</span> <span class="nt">-1</span>
Linia 7
</code></pre></div></div> <h2 id="functii">Functii</h2> <p>Program Bash care preia doua argumente, le valideaza sa fie numere intregi si le adauga, printand suma. Programul ilustreaza urmatoarele concepte:</p> <ul> <li>functii</li> <li>variabile locale vs. variabile globale</li> <li>compararea unei variabile cu o expresie regulata</li> <li>coduri de iesire returnate de functii</li> </ul> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

este_intreg<span class="o">()</span> <span class="o">{</span>
  <span class="nb">local </span><span class="nv">arg</span><span class="o">=</span><span class="nv">$1</span>
  <span class="o">[[</span> <span class="nv">$arg</span> <span class="o">=</span>~ ^-?[0-9]+<span class="nv">$ </span><span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="k">return </span>0
  <span class="k">return </span>1
<span class="o">}</span>

argument_valid<span class="o">()</span> <span class="o">{</span>
  <span class="nb">local </span><span class="nv">arg</span><span class="o">=</span><span class="nv">$1</span>
  <span class="k">if</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$arg</span><span class="s2">"</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> este_intreg <span class="nv">$arg</span><span class="p">;</span> <span class="k">then
    return </span>0
  <span class="k">fi
  </span><span class="nb">echo</span> <span class="s2">"Argumentul </span><span class="nv">$arg</span><span class="s2"> nu este valid"</span>
  <span class="k">return </span>1
<span class="o">}</span>

adauga<span class="o">()</span> <span class="o">{</span>
  <span class="nb">local </span><span class="nv">arg1</span><span class="o">=</span><span class="nv">$1</span>
  <span class="nb">local </span><span class="nv">arg2</span><span class="o">=</span><span class="nv">$2</span>

  <span class="k">if </span>argument_valid <span class="nv">$arg1</span> <span class="o">&amp;&amp;</span> argument_valid <span class="nv">$arg2</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">sum</span><span class="o">=</span><span class="k">$((</span><span class="nv">$arg1</span><span class="o">+</span><span class="nv">$arg2</span><span class="k">))</span>
    <span class="nb">echo</span> <span class="nv">$sum</span>
    <span class="k">return </span>0
  <span class="k">fi
  return </span>1
<span class="o">}</span>

usage<span class="o">()</span> <span class="o">{</span>
  <span class="nb">echo</span> <span class="s2">"</span><span class="k">$(</span><span class="nb">basename</span> <span class="nv">$0</span><span class="k">)</span><span class="s2"> ARGUMENT1 ARGUMENT2"</span>
<span class="o">}</span>

<span class="k">if</span> <span class="o">[[</span> <span class="nv">$# </span><span class="nt">-ne</span> 2 <span class="o">]]</span><span class="p">;</span> <span class="k">then
  </span>usage
  <span class="nb">exit </span>1
<span class="k">else
  </span>adauga <span class="nv">$1</span> <span class="nv">$2</span>
<span class="k">fi</span>
</code></pre></div></div> </div> </section> </div> </div> <div class="toc-sidebar hidden-xs"> <nav id="toc-nav"> <ul id="toc-menu" class="toc-menu nav nav-stacked" data-spy="affix" data-offset-top="180"> <li><a class="scrollto" href="#despre">Despre</a> </li> <li><a class="scrollto" href="#ordinea-evenimentelor-în-execuția-comenzilor-in-shell">Ordinea evenimentelor în execuția comenzilor in shell</a> </li> <li><a class="scrollto" href="#expansiunea-elementelor-de-shell">Expansiunea elementelor de Shell</a> </li> <li><a class="scrollto" href="#sintaxa">Sintaxa</a> <ul class="toc-sub-menu nav nav-stacked"> <li><a class="scrollto" href="#compararea-variabilelor">Compararea variabilelor</a> </li> <li><a class="scrollto" href="#iterarea">Iterarea</a> </li> <li><a class="scrollto" href="#parsarea-argumentelor">Parsarea argumentelor</a> </li> <li><a class="scrollto" href="#input-si-output">Input si output</a> </li> <li><a class="scrollto" href="#named-pipe">Named pipe</a> </li> <li><a class="scrollto" href="#manipularea-descriptorilor-de-fisier">Manipularea descriptorilor de fisier</a> </li></ul></li> <li><a class="scrollto" href="#comenzi-utile">Comenzi utile</a> <ul class="toc-sub-menu nav nav-stacked"> <li><a class="scrollto" href="#ls-list">ls (list)</a> </li> <li><a class="scrollto" href="#cd-change-directory">cd (change directory)</a> </li> <li><a class="scrollto" href="#cp-copy">cp (copy)</a> </li> <li><a class="scrollto" href="#mv-move-rm-remove">mv (move), rm (remove)</a> </li> <li><a class="scrollto" href="#grep">grep</a> </li> <li><a class="scrollto" href="#cat">cat</a> </li> <li><a class="scrollto" href="#tail-head">tail, head</a> </li></ul></li> <li><a class="scrollto" href="#functii">Functii</a> </li> </ul> </nav> </div> </div> </div> </section> </div> <footer class="footer text-center"> <div class="container-fluid"> <div class="row"> <div class="col-md-2 col-xs-6"> <small class="copyright"> Bazat pe <a href="https://github.com/xriley/PrettyDocs-Theme" target="_blank">PrettyDocs</a>, dezvoltat de <a href="http://themes.3rdwavemedia.com/" target="_blank">Xiaoying Riley</a>. </small> </div> <div class="offset-md-2 col-md-8 col-xs-6"> <small> Ultima actualizare: 14 martie 2019 / <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="Conținut licențiat sub termenii Attribution-NonCommercial-ShareAlike 4.0 International">CC</a> <br/><a href="https://teaching.alexcoman.com" title="Spre situl Web al titularului laboratorului Alexandru Coman.">Alexandru Coman</a> </small> </div> </div> </div> </footer> <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script> <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-scrollTo/2.1.2/jquery.scrollTo.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.matchHeight/0.7.2/jquery.matchHeight-min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/5.3.0/ekko-lightbox.min.js"></script> <script src="/assets/js/main.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script> <script>hljs.initHighlightingOnLoad();</script> </body> </html>
